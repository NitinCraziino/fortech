import{b as y,a as S,e as k,R as C,d as E,r as P,u as R,j as s,K as B,B as L,L as A,au as F,av as T}from"./index-V67Iib8C.js";const D=()=>{const u=y(),h=S(),{success:j,errorToast:g}=k(),n=h.pathname.includes("/reset-password/"),{id:i}=C(),{loading:b,error:d}=E(e=>e.auth);P.useEffect(()=>{d&&g(d)},[d]);const N=R(),[a,m]=P.useState({newPassword:"",confirmPassword:"",errors:{newPassword:null,confirmPassword:null}}),w=e=>e?e.length<6?"Password must be at least 6 characters.":/[A-Z]/.test(e)?/[a-z]/.test(e)?/\d/.test(e)?/[!@#$%^&*]/.test(e)?null:"Password must contain at least one special character.":"Password must contain at least one number.":"Password must contain at least one lowercase letter.":"Password must contain at least one uppercase letter.":"New password is required.",x=(e,r)=>r?e!==r?"Passwords do not match.":null:"Confirm password is required.",f=e=>{const{newPassword:r,confirmPassword:o}=a,t={...a.errors};e==="newPassword"&&(t.newPassword=w(r)),e==="confirmPassword"&&(t.confirmPassword=x(r,o)),m(l=>({...l,errors:t}))},p=e=>{const{name:r,value:o}=e.target;m(t=>({...t,[r]:o,errors:{...t.errors,[r]:null}}))},v=async e=>{e.preventDefault();const{newPassword:r,confirmPassword:o}=a,t=w(r),l=x(r,o);if(t||l){m(c=>({...c,errors:{newPassword:t,confirmPassword:l}}));return}if(i)try{(n?await u(F({token:i,newPassword:r})).unwrap():await u(T({userId:i,password:r})).unwrap())&&(j(n?"Password reset successful.":"Password set successfully."),N("/login"))}catch(c){console.error("Login error:",c)}console.log("Password successfully set!")};return s.jsxs("div",{className:"grid grid-cols-2 p-6 h-full min-h-screen",children:[s.jsx(B,{show:b,fullScreen:!0}),s.jsxs("div",{className:"px-3 flex flex-col justify-center items-center",children:[s.jsx("div",{className:"text-center flex justify-center md:mb-24 mb-4",children:s.jsx("img",{src:"/images/mainLogo.png",alt:"",className:"max-w-[111px]"})}),s.jsxs("form",{onSubmit:v,className:"max-w-[447px] w-full mx-auto",children:[s.jsxs("h1",{className:"text-2xl font-medium mb-12",children:[n?"Reset":"Set"," Password"]}),s.jsxs("div",{className:"flex flex-col gap-9",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"new-password",className:"text-sm mb-2 inline-block",children:"New Password"}),s.jsx("input",{type:"password",name:"newPassword",value:a.newPassword,onChange:p,onBlur:()=>f("newPassword"),id:"new-password",placeholder:"Enter New Password",className:"block border border-input rounded-sm outline-none px-3 py-[7px] text-sm w-full"}),a.errors.newPassword&&s.jsx("p",{className:"text-xs text-red-500",children:a.errors.newPassword})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"text-sm mb-2 inline-block",children:"Confirm new Password"}),s.jsx("input",{type:"password",placeholder:"Confirm new Password",id:"confirm-password",name:"confirmPassword",value:a.confirmPassword,onChange:p,onBlur:()=>f("confirmPassword"),className:"block border border-input rounded-sm outline-none px-3 py-[7px] text-sm w-full"}),a.errors.confirmPassword&&s.jsx("p",{className:"text-xs text-red-500",children:a.errors.confirmPassword})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(L,{variant:"default",className:"min-w-[150px]",type:"submit",children:[n?"Reset":"Set"," Password"]}),s.jsxs("p",{className:"text-muted text-sm block",children:["Remember?"," ",s.jsx(A,{to:"/login",className:"text-[#3860E2]",children:"Back to Login"})]})]})]})]})]}),s.jsxs("div",{className:"rounded-lg flex justify-center items-center bg-secondary relative",children:[s.jsx("img",{src:"/images/authImage.png",alt:"auth-image",className:"max-w-[526px] w-full"}),s.jsx("p",{className:"text-sm text-[#334155] absolute bottom-6 right-6",children:"*Terms & Conditions"})]})]})};export{D as default};
